# redux

## 纯函数

一个函数是纯函数的条件：

1. 此函数在相同的输入值时，需产生相同的输出。函数的输出和输入值以外的其他隐藏信息或状态无关，也和由 I/O 设备产生的外部输出无关
2. 该函数不能有语义上可观察的函数副作用，诸如“触发事件”，使输出设备输出，或更改输出值以外物件的内容等

> React 中就要求我们无论是函数还是 class 声明一个组件，这个组件都必须像纯函数一样，保护它们的 props 不被修改

> redux 中，reducer 也被要求是一个纯函数

## redux 的作用

redux 的作用是帮助管理 JS 开发中的状态，包括但不限制于：括服务器返回的数据、缓存数据、用户操作产生的数据等等，也包括一些 UI 的状态，比如某些元素是否被选中，是否显示加载动效，当前分页

这些数据如果都依赖 react 组件内部的 state 有的很难管理：

1. 状态之间相互会存在依赖，一个状态的变化会引起另一个状态的变化，View 页面也有可能会引起状态的变化
2. 当应用程序复杂时，state 在什么时候，因为什么原因而发生了变化，发生了怎么样的变化，会变得非常难以控制和追踪
3. Redux 就是一个帮助我们管理 State 的容器：Redux 是 JavaScript 的状态容器，提供了可预测的状态管理
4. Redux 除了和 React 一起使用之外，它也可以和其他界面库一起来使用（比如 Vue）

### redux 核心 API

1. 创建一个对象作为要保存的状态
2. 创建 Store 来存储 state
   1. 创建 Store 的时候必须创建 reducer
   2. 可以通过 store.getState 来获取当前的 state
3. 通过 action 来修改 state
   1. dispatch 来派发 action
   2. 通常 action 中都会有 type 属性，也可以携带其他的数据
4. .修改 reducer 中的处理代码，reducer 是一个纯函数，不需要直接修改 state
5. 派发 action 之前，监听 store 的变化
